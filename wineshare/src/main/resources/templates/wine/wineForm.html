<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}">

<!-- 사용자 css -->
<th:block layout:fragment="css">
    <link rel="stylesheet" type="text/css" th:href="@{/wineshare-css/wine-form.css}">

</th:block>

<!--/* 사용자 js 추가 */-->
<th:block layout:fragment="script">
    <script th:inline="javascript">
        $(document).ready(function(){

          // const errorMessage = [[${errorMessage}]];
          // if (errorMessage != null) {
          //   alert(errorMessage);
          // }

          bindDomEvent();

        });

        // 이미지 파일만 등록 가능하도록 해주기
        function bindDomEvent() {
          $(".custom-file-input").on("change", function() {
            const fileName = $(this).val().split("\\").pop();
            // 체인지가 일어난곳(this)의 밸류(들어간 파일의 경로)
            // 경로를 스플릿하면 경로의 마지막이 제일 위로 쌓이고, 팝하면 그걸 꺼내옴 = 파일명
            let fileExt = fileName.substring(fileName.lastIndexOf(".")+1); // 확장자 추출
            fileExt = fileExt.toLowerCase(); // 확장자를 소문자로 변환

            if (fileExt != "jpg" && fileExt != "jpeg" && fileExt != "gif" && fileExt != "png" && fileExt != "bmp") {
              alert("이미지 파일만 등록이 가능합니다.");
              return;
            }

            $(this).siblings(".custom-file-label").html(fileName);
            // 파일 이름 띄워주기 (this=custom-file-input 의 형제 중 custom-file-label 에 fileName을 html로 넣어줌)

          });
        }
    </script>
</th:block>


<div layout:fragment="content">

    <!-- 각 페이지 상단에 경로 나타내주는 부분.. -->
    <div class="page-title parallax parallax1">
        <div class="container">
            <div class="page-title-content d-sm-flex justify-content-sm-between align-items-center text-center">
                <div class="breadcrumbs">
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Product</a></li>
                        <li class="blog"><a href="#">Wine Form</a></li>
                    </ul>
                </div>
                <div class="page-title-heading">
                    <h2 class="title"><a href="#">Wine Form</a></h2>
                </div>
            </div>
        </div>
    </div> <!-- /.page-title -->

    <div class="wine-form">
        <h1 class="wine-form-title">Wine Register</h1>

        <!-- 타임리프를 사용한 와인 등록 폼 -->
        <form th:action="@{/templates/wine}" method="post" class="wineForm" th:object="${wineDTO}" enctype="multipart/form-data">

            <!-- 와인 이름 입력 -->
            <div class="form-group">
                <label th:for="wineName">Wine Name</label>
                <input th:field="*{wineName}" type="text" placeholder="와인 이름을 입력해주세요." required/>
            </div>

            <!-- 생산 국가 입력 -->
            <div class="form-group">
                <label th:for="country">Wine Country</label>
                <input th:field="*{country}" type="text" placeholder="생산 국가를 입력해주세요." required/>
            </div>

            <!-- 생산 지역 입력 -->
            <div class="form-group">
                <label th:for="region">Wine Region</label>
                <input th:field="*{region}" type="text" placeholder="생산 지역을 입력해주세요." required/>
            </div>

            <!-- 와인 가격 입력 -->
            <div class="form-group">
                <label th:for="price">Price (₩)</label>
                <input th:field="*{price}" type="text" placeholder="와인 가격을 입력해주세요." required/>
            </div>

            <!-- 와인 종류 선택 -->
            <div class="form-group">
                <label th:for="wineType">Wine Type</label>
                <select th:field="*{wineType}" id="wineTypeSelect" onchange="toggleDevelopForm()">
                    <option value="RED">RED</option>
                    <option value="WHITE">WHITE</option>
                    <option value="SPARKLING">SPARKLING</option>
                    <option value="ROSE">ROSE</option>
                    <option value="DESSERT">DESSERT</option>
                    <option value="PORT">PORT</option>
                </select>
            </div>

            <!-- 이미지 첨부 -->
            <div class="form-group">
                <label th:for="wineImg">Wine Image</label>
                <div th:if="${#strings.isEmpty(wineDTO.wineImg)}">
                    <div class="form-img">
                        <div class="custom-file img-div">
                            <input type="file" class="custom-file-input" name="wineImgFile">
                            <label class="custom-file-label" th:text="와인이미지"></label>
                        </div>
                    </div>
                </div>

                <div th:if="${not #strings.isEmpty(wineDTO.wineImg)}">
                    <div class="form-img">
                        <div class="custom-file img-div">
                            <input type="file" class="custom-file-input" name="wineImgFile">
                            <input type="hidden" name="id" th:value="${wineDTO.id}">
                            <label class="custom-file-label"
                                   th:text="와인 이미지를 동록해주세요."></label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 등록 버튼 -->
            <div>
                <div class="wine-reg-button">
                    <!--    th:formaction 경로 수정해야합니덥!!!     -->
                    <button type="submit" class="btn text-white" style="background-color: #c02323;">등록</button> <!-- 자바스크립트에서 와인먼저등록 후 등록한 와인아이디로 와인디벨롭에 등록하도록 -->
                    <button type="reset" class="btn text-white" style="background-color: #BDBDBD;">취소</button>
                </div>
            </div>



        </form>

        <div class="comment-respond" >
            <form class="developForm" id="comment-respond-develop">
                    <span>
                    <!-- 전문가 맛 그래프 입력 폼 -->
                    <p>Add Develop</p>
                    <div class="pro-taste">
                      <div class="taste-like">
                        <div class="taste-category">
                          <h3>Body</h3>
                          <select class="select-option" name="develop-body">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                          </select>

                        </div>

                        <div class="taste-category" >
                          <h3>Tannin</h3>
                          <select class="select-option" name="develop-tannin">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                          </select>
                        </div>

                        <div class="taste-category" >
                          <h3>Sweetness</h3>
                          <select class="select-option" name="develop-sweetness">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                          </select>
                        </div>

                        <div class="taste-category">
                          <h3>Acidity</h3>
                          <select class="select-option" name="develop-acidity">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                          </select>
                        </div>

                        <div class="taste-category">
                          <h3>Fizz</h3>
                          <select class="select-option" name="develop-fizz">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                          </select>
                        </div>
                      </div>

                    </div>



                        <!-- 전문가 아로마 휠, 페어링 입력 폼 -->

                    <div class="pro-taste">
                      <div class="taste-like">

                      <!--   아로마 휠 & 푸드 페어링       -->
                        <div class="taste-category">
                        <h3>Aroma-1</h3>
                        <select name="develop-aromaOne" id="aromaOne">
                          <option value="Citrus">Citrus</option>
                          <option value="Tree Fruit">Tree Fruit</option>
                          <option value="Stone Fruit">Stone Fruit</option>
                          <option value="Tropical Fruit">Tropical Fruit</option>
                          <option value="Berry">Berry</option>
                          <option value="Floral">Floral</option>
                          <option value="Herb">Herb</option>
                          <option value="Vegetable">Vegetable</option>
                          <option value="Fermented">Fermented</option>
                          <option value="Roasted">Roasted</option>
                          <option value="Spice">Spice</option>
                          <option value="Nuts">Nuts</option>
                          <option value="Tree">Tree</option>
                          <option value="Honey">Honey</option>
                          <option value="Fungi">Fungi</option>
                        </select>
                      </div>

                        <div class="taste-category">
                        <h3>Aroma-2</h3>
                        <select name="develop-aromaTwo" id="aromaTwo">
                          <option value="Citrus">Citrus</option>
                          <option value="Tree Fruit">Tree Fruit</option>
                          <option value="Stone Fruit">Stone Fruit</option>
                          <option value="Tropical Fruit">Tropical Fruit</option>
                          <option value="Berry">Berry</option>
                          <option value="Floral">Floral</option>
                          <option value="Herb">Herb</option>
                          <option value="Vegetable">Vegetable</option>
                          <option value="Fermented">Fermented</option>
                          <option value="Roasted">Roasted</option>
                          <option value="Spice">Spice</option>
                          <option value="Nuts">Nuts</option>
                          <option value="Tree">Tree</option>
                          <option value="Honey">Honey</option>
                          <option value="Fungi">Fungi</option>
                        </select>
                      </div>

                        <div class="taste-category">
                        <h3>Paring-1</h3>
                        <select name="develop-foodOne" id="foodOne">
                          <option value="Beef">Beef</option>
                          <option value="Chicken">Chicken</option>
                          <option value="Pork">Pork</option>
                          <option value="Mushroom">Mushroom</option>
                          <option value="Charcuterie">Charcuterie</option>
                          <option value="Cheese">Cheese</option>
                          <option value="Pasta">Pasta</option>
                          <option value="Spicy">Spicy</option>
                          <option value="Snack">Snack</option>
                          <option value="Shell">Shell</option>
                          <option value="Fish">Fish</option>
                          <option value="Vegetable">Vegetable</option>
                        </select>
                      </div>

                        <div class="taste-category">
                        <h3>Paring-2</h3>
                        <select name="develop-foodTwo" id="foodTwo">
                          <option value="Beef">Beef</option>
                          <option value="Chicken">Chicken</option>
                          <option value="Pork">Pork</option>
                          <option value="Mushroom">Mushroom</option>
                          <option value="Charcuterie">Charcuterie</option>
                          <option value="Cheese">Cheese</option>
                          <option value="Pasta">Pasta</option>
                          <option value="Spicy">Spicy</option>
                          <option value="Snack">Snack</option>
                          <option value="Shell">Shell</option>
                          <option value="Fish">Fish</option>
                          <option value="Vegetable">Vegetable</option>
                        </select>
                      </div>
                      </div>
                    </div>


                    <div class="clearfix"></div>
                    <p class="your-rating">Rating</p>
                    <div class="developRatingInput">
                      <i class="fa fa-star" aria-hidden="true" data-value="1"></i>
                      <i class="fa fa-star" aria-hidden="true" data-value="2"></i>
                      <i class="fa fa-star" aria-hidden="true" data-value="3"></i>
                      <i class="fa fa-star" aria-hidden="true" data-value="4"></i>
                      <i class="fa fa-star" aria-hidden="true" data-value="5"></i>
                      <input type="hidden" id="developRating" name="developRating" value=""> <!-- 숨겨진 입력 필드로 별점 저장 -->
                    </div>
                    <p class="comment-form-comment">
                      <textarea  name="developComment" placeholder="Comment" required="required"></textarea>
                    </p>
                    <p class="submit-form">
                      <button name="submit" type="submit" class="submit btn btn-styl hvr-shutter-out-horizontal" >SUBMIT</button>
                    </p>
                      </span>
            </form>
        </div>  <!-- /comment-respond -->


    </div>

</div>
</html>