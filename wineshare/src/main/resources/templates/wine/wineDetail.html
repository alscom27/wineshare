<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout1}" xmlns:c="http://www.w3.org/1999/XSL/Transform">

<head>
  <meta name="_csrf" th:content="${_csrf.token}" />
  <meta name="_csrf_header" th:content="${_csrf.headerName}" />
</head>

<!-- 추가된 css -->
<th:block layout:fragment="css">
  <link rel="stylesheet" type="text/css" th:href="@{/wineshare-css/wine-detail.css}">
  <style>
    .profile_img {
      width: 50px;
      height: 50px;
    }

    .wine_img {
      height: 400px;
      width: auto;
      position: relative;
      left: 50%;
      transform: translateX(-50%);
    }
    .similar_img {
      height: 250px;
      width: auto;
    }
    .progress-bar {
      position:relative;
      width: 10%;
      transform: translateX(-50%);
    }
    .review_box {
      margin: 20px auto;
    }
    .heart.mg-item-ct {
      cursor: pointer;
    }
    .heart.mg-item-ct.active {
      background-color: #c02323 !important;
    }
    .fa.fa-heart.active {
      color: white !important;
    }
    .disabled {
      pointer-events: none; /* 클릭 이벤트 방지 */
      opacity: 0.5; /* 비활성화된 효과 */
    }
    .page-active {
      background-color: #c02323 !important;
    }
    .fa-star, .post-rating {
      cursor: default;
    }
    .comment-respond .fa-star,
    .modify-reviewRatingInput .fa-star,
    .modify-developRatingInput .fa-star{
      cursor: pointer;
    }
    .review-content {
      margin: 20px auto;
    }
    .comment-actions, .modify-actions {
      margin-top: 5px;
      margin-left: -5px;
    }
    .comment-actions button,
    .modify-actions button {
      font-size: 0.9em;
      color: #aaa;
    }
    .display-none {
      display: none;
    }
    .similar-wine-inner-text {
      color: #aaa;
      font-size: 1em;
    }

  </style>
</th:block>

<!-- 추가된 js  -->
<th:block layout:fragment="script">
  <script th:inline="javascript">
    $(document).ready(function () {
      const wineId = $('#getWineId').data('wine-id');
      getWineDevelopList(wineId, 0);
      getWineReviewList(wineId, 0);

      toggleGraph();
      toggleMember();


      // 리뷰 별점 클릭 시 밸류변화
      $('.reviewRatingInput i').on('click', function () {
        const rating = $(this).data('value');
        $('.reviewRatingInput i').removeClass('active'); // 기존 별점 초기화
        $(this).prevAll().addBack().addClass('active'); // 선택한 별점과 이전 별점에 active 클래스 추가
        $('#reviewRating').val(rating); // 숨겨진 input에 별점 저장
      });

      // 평가 별점 클릭 시 밸류 변화
      $('.developRatingInput i').on('click', function () {
        const rating = $(this).data('value');
        $('.developRatingInput i').removeClass('active'); // 기존 별점 초기화
        $(this).prevAll().addBack().addClass('active'); // 선택한 별점과 이전 별점에 active 클래스 추가
        $('#developRating').val(rating); // 숨겨진 input에 별점 저장
      });


      // 리뷰 등록
      $('.reviewForm').on('submit', function (e) {
        e.preventDefault(); // 기본 제출 방지
        const token = $("meta[name='_csrf']").attr("content");
        const header = $("meta[name='_csrf_header']").attr("content");
        const regularRating = $('#reviewRating').val();
        const regularReview = $('textarea[name="reviewComment"]').val();
        const wineId = $('#getWineId').data('wine-id'); // 와인 ID 가져오기

        const reviewData = {
          regularRating: regularRating,
          regularReview: regularReview
        };

        $.ajax({
          url: `/reviews/new/${wineId}`, // 서버 URL
          type: 'POST',
          contentType: 'application/json',
          beforeSend: function (xhr) {
            xhr.setRequestHeader(header, token)
          },
          data: JSON.stringify(reviewData),
          success: function (response) {
            alert(response); // 성공 메시지
            $('.reviewRatingInput i').removeClass('active');
            $('textarea[name="reviewComment"]').val('');
            getWineReviewList(wineId, 0);
          },
          error: function (xhr) {
            if (xhr.status == '401') {
              alert('로그인 후 이용하세요.');
              location.href = '/members/login';
            } else {
              alert(xhr.responseText);
            }
          }
        });
      });

      // 평가 등록
      $('.developForm').on('submit', function (e) {
        e.preventDefault(); // 기본 제출 방지
        const token = $("meta[name='_csrf']").attr("content");
        const header = $("meta[name='_csrf_header']").attr("content");
        const expertRating = $('#developRating').val();
        const expertComment = $('textarea[name="developComment"]').val();
        const sweetness = $('select[name="develop-sweetness"]').val();
        const acidity = $('select[name="develop-acidity"]').val();
        const body = $('select[name="develop-body"]').val();
        const tannin = $('select[name="develop-tannin"]').val();
        const fizz = $('select[name="develop-fizz"]').val();
        const aromaOne = $('select[name="develop-aromaOne"]').val();
        const aromaTwo = $('select[name="develop-aromaTwo"]').val();
        const foodOne = $('select[name="develop-foodOne"]').val();
        const foodTwo = $('select[name="develop-foodTwo"]').val();
        const wineId = $('#getWineId').data('wine-id'); // 와인 ID 가져오기

        if (aromaOne === aromaTwo) {
          alert('아로마는 같은 값을 선택할 수 없습니다.');
          return;
        }
        if (foodOne === foodTwo) {
          alert('페어링은 같은 값을 선택할 수 없습니다.');
          return;
        }

        const developData = {
          expertRating: expertRating,
          expertComment: expertComment,
          sweetness: sweetness,
          acidity: acidity,
          body: body,
          tannin: tannin,
          fizz: fizz,
          aromaOne: aromaOne,
          aromaTwo: aromaTwo,
          foodOne: foodOne,
          foodTwo: foodTwo
        };

        $.ajax({
          url: `/develops/new/${wineId}`, // 서버 URL
          type: 'POST',
          contentType: 'application/json',
          beforeSend: function (xhr) {
            xhr.setRequestHeader(header, token)
          },
          data: JSON.stringify(developData),
          success: function (response) {
            alert(response); // 성공 메시지
            $('textarea[name="developComment"]').val('');
            $('.developRatingInput i').removeClass('active');
            $('select[name="develop-sweetness"]').val(0);
            $('select[name="develop-acidity"]').val(0);
            $('select[name="develop-body"]').val(0);
            $('select[name="develop-tannin"]').val(0);
            $('select[name="develop-fizz"]').val(0);
            $('select[name="develop-aromaOne"]').val('Citrus');
            $('select[name="develop-aromaTwo"]').val('Citrus');
            $('select[name="develop-foodOne"]').val('Beef');
            $('select[name="develop-foodTwo"]').val('Beef');
            getWineDevelopList(wineId, 0);
          },
          error: function (xhr) {
            if (xhr.status == '401') {
              alert('로그인 후 이용하세요.');
              location.href = '/members/login';
            } else {
              alert(xhr.responseText);
            }
          }
        });
      });
    });

    // 멤버타입에 따라 페이지 디테일(버튼,폼) 바꿔주는 메소드
    function toggleMember() {
      const getMemberType = $('#getMemberType');
      const getNoMemberType = $('#getNoMemberType');
      const memberTypeNow = getMemberType.length > 0 ? getMemberType.data('member-type') : getNoMemberType.data('member-type');

      const developForm = document.getElementById('comment-respond-develop');
      const modifyBtn = document.getElementById('modify-btn');
      const deleteBtn = document.getElementById('delete-btn');

      console.log(memberTypeNow);
      if (memberTypeNow !== "ADMIN") {
        deleteBtn.style.display = "none";
      }
      if (memberTypeNow !== "EXPERT" && memberTypeNow !== "ADMIN") {
        modifyBtn.style.display = "none";
        developForm.style.display = "none";
      }
    }

    // 와인타입에 따라 그래프와 셀렉트바 바꿔주는 메소드
    function toggleGraph() {
      const wineTypeNow = $('#getWineType').data('wine-type');
      const tanninGraph = document.getElementById('tanninGraph');
      const fizzGraph = document.getElementById('fizzGraph');
      const sweetnessGraph = document.getElementById('sweetnessGraph');
      const tanninSelector = document.getElementById('tanninSelector');
      const fizzSelector = document.getElementById('fizzSelector');
      const sweetnessSelector = document.getElementById('sweetnessSelector');

      console.log(wineTypeNow);
      if (wineTypeNow === "RED") {
        fizzGraph.style.display = "none";
        fizzSelector.style.display = "none";
      } else if (wineTypeNow === "SPARKLING") {
        sweetnessGraph.style.display = "none";
        sweetnessSelector.style.display = "none";
        tanninGraph.style.display = "none";
        tanninSelector.style.display = "none"
      } else {
        tanninGraph.style.display = "none";
        tanninSelector.style.display = "none"
        fizzGraph.style.display = "none";
        fizzSelector.style.display = "none";
      }
    }


    // 셀러 추가
    function addCellar(element) {
      const token = $("meta[name='_csrf']").attr("content");
      const header = $("meta[name='_csrf_header']").attr("content");

      const wineId = $(element).data('wine-id');
      const url = "/cellars";
      const paramData = {
        wineId: wineId
      };
      const param = JSON.stringify(paramData);

      $.ajax({
        url: url,
        type: "POST",
        contentType: "application/json",
        data: param,
        beforeSend: function (xhr) {
          xhr.setRequestHeader(header, token)},
        dataType: "json",
        cache: false,
        success: function (result, status) {
          alert('셀러에 추가되었습니다.');
          $(element).addClass('active')
          $(element).find('i').addClass('active');
        },
        error: function (xhr, status, error) {
          if (xhr.status == '401') {
            alert('로그인 후 이용하세요.');
            location.href = '/members/login';
          } else {
            alert(xhr.responseText);
          }
        }
      });
    }

    // 평가페이지 불러오기
    function getWineDevelopList(wineId, developPage) {
      const token = $("meta[name='_csrf']").attr("content");
      const header = $("meta[name='_csrf_header']").attr("content");
      const loginUserIdElement = $("#getLoginUserId");
      const noLoginUserIdElement = $("#getNoLoginUserId");
      const loginUserId = loginUserIdElement.length > 0
              ? loginUserIdElement.data("login-user-id")
              : noLoginUserIdElement.data("login-user-id");
      function createBtns(developMemberId, developId) {
        if (loginUserId === developMemberId) {
          return `
              <div class="comment-actions">
                  <button class="modify-btn" onclick="modifyDevelop(${developId})">수정</button>
                  <button class="delete-btn" onclick="deleteDevelop(${developId})">삭제</button>
              </div>
          `;
        }
        return '';
      }


      $.ajax({
        url: `/develops/${wineId}/${developPage}`, // 템플릿 리터럴 사용
        type: 'GET',
        beforeSend: function(xhr) {
          xhr.setRequestHeader(header, token);
        },
        cache: false,
        success: function(data) {
          const wineDevelopListContainer = $('#wineDevelopListContainer');
          wineDevelopListContainer.empty(); // 기존 내용 초기화

          data.wineDevelops.forEach(function(develop) {
            const developRating = develop.expertRating != null ? Math.round(develop.expertRating) : 0;

            const item = `
                <div class="review-content">
                    <div class="avatar">
                        <img src="/wineshare-img/people.png" alt="image" class="profile_img">
                    </div>
                    <div class="post-comment" id="post-develop-${develop.id}">
                        <div class="post-rating">
                            <span>
                                ${Array.from({ length: developRating }, () => `<i class="fa fa-star active" aria-hidden="true"></i>`).join('')}
                                ${Array.from({ length: 5 - developRating }, () => `<i class="fa fa-star" aria-hidden="true"></i>`).join('')}
                                <input type="hidden" id="developRating-${develop.id}" name="developRating" value="${developRating}">
                                <input type="hidden" id="developSweetness-${develop.id}" name="developSweetness" value="${develop.sweetness}">
                                <input type="hidden" id="developAcidity-${develop.id}" name="developAcidity" value="${develop.acidity}">
                                <input type="hidden" id="developBody-${develop.id}" name="developBody" value="${develop.body}">
                                <input type="hidden" id="developTannin-${develop.id}" name="developTannin" value="${develop.tannin}">
                                <input type="hidden" id="developFizz-${develop.id}" name="developFizz" value="${develop.fizz}">
                                <input type="hidden" id="developAromaOne-${develop.id}" name="developAromaOne" value="${develop.aromaOne}">
                                <input type="hidden" id="developAromaTwo-${develop.id}" name="developAromaTwo" value="${develop.aromaTwo}">
                                <input type="hidden" id="developFoodOne-${develop.id}" name="developFoodOne" value="${develop.foodOne}">
                                <input type="hidden" id="developFoodTwo-${develop.id}" name="developFoodTwo" value="${develop.foodTwo}">
                            </span>
                        </div>
                        <div class="comment-title comment">${develop.memberNickname}</div>
                        <div class="comment-text comment" id="comment-develop-${develop.id}">${develop.expertComment}</div>
                        ${createBtns(develop.memberId, develop.id)}
                    </div>
                </div>
                `;
            wineDevelopListContainer.append(item); // HTML 추가
            const commentForm = document.getElementById("comment-respond-develop"); // 평가폼
            commentForm.className = "developForm"; //

          });
          updateDevelopPage(data.currentPage, data.totalPages)
        },
        error: function(xhr) {
          console.error(xhr);
          let errorMessage = '와인 평가 정보를 불러오지 못했습니다.';
          if (xhr.status === 401) {
            errorMessage = '로그인이 필요합니다.';
          } else if (xhr.status === 500) {
            errorMessage = '서버 오류가 발생했습니다. 나중에 다시 시도하세요.';
          }
          alert(errorMessage);
        }
      });
    }
    // 평가페이징
    function updateDevelopPage(currentPage, totalPages) {
      const wineId = $('#getWineId').data('wine-id');
      const paginationContainer = $('#developPageContainer');
      paginationContainer.empty(); // 기존 페이지네이션 비우기
      // 이전 버튼
      const prevDisabled = currentPage === 0 ? 'disabled' : '';
      paginationContainer.append(`
        <li class="prev hvr-shutter-out-horizontal ${prevDisabled}">
            <a ${prevDisabled ? '' : 'onclick="getWineDevelopList(' + wineId + ',' + (currentPage - 1) + ')"'} aria-label="Previous">
                <i class="fa fa-angle-left" aria-hidden="true"></i>
            </a>
        </li>
        `);
      // maxPage를 정의합니다. (예: 5)
      const maxPage = 5;
      // 페이지 번호 계산
      let start = Math.floor(currentPage / maxPage) * maxPage; // 현재 페이지 기준으로 시작
      let end = Math.min(start + maxPage, totalPages); // 최대 maxPage 개수 표시
      // 페이지 번호 추가
      for (let i = start; i < end; i++) {
        const activeClass = i === currentPage ? 'page-active' : '';
        paginationContainer.append(`
            <li class="hvr-shutter-out-horizontal ${activeClass}">
                <a onclick="getWineDevelopList(${wineId}, ${i} )" aria-label="Page">${i + 1}</a>
            </li>
        `);
      }
      // 다음 버튼
      const nextDisabled = (currentPage === totalPages -1 || totalPages === 0) ? 'disabled' : '';
      paginationContainer.append(`
        <li class="next hvr-shutter-out-horizontal ${nextDisabled}">
            <a ${nextDisabled ? '' : 'onclick="getWineDevelopList('+ wineId + ',' + (currentPage + 1) + ')"'} aria-label="Next">
                <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
        </li>
        `);
    }
    // 평가삭제
    function deleteDevelop(developId) {
      const wineId = $('#getWineId').data('wine-id');
      const token = $("meta[name='_csrf']").attr("content");
      const header = $("meta[name='_csrf_header']").attr("content");
      const page = $("#developPageContainer .page-active a").text();
      if (confirm("이 평가를 삭제하시겠습니까?")) {
        $.ajax({
          url: `/develops/${developId}`,
          type: 'DELETE',
          beforeSend: function(xhr) {
            xhr.setRequestHeader(header, token);
          },
          success: function (response) {
            alert(response);
            getWineDevelopList(wineId, page-1); // 리스트 리로드, 현재 페이지로
          },
          error: function(xhr) {
            if(xhr.status == '401'){
              alert("로그인 후 이용해주세요.");
              location.href = "/members/login";
            }else{
              alert(xhr.responseText);
            }
          }
        });
      }
    }
    // 평가수정폼 열기
    function modifyDevelop(developId) {
      const page = $("#developPageContainer .page-active a").text(); // 현재 평가페이지
      const wineId = $('#getWineId').data('wine-id'); // 현재페이지 와인아이디
      const wineType = $('#getWineType').data('wine-type'); // 현재페이지 와인타입
      const commentForm = document.getElementById("comment-respond-develop"); //평가폼
      const commentDiv = $(`#comment-develop-${developId}`); // 수정하고싶은 평가의 기존 텍스트에리어
      const currentText = commentDiv.text(); // 위에서 텍스트만 떼온거
      const currentDiv = $(`#post-develop-${developId}`); // 현재 평가 디브
      const currentRating = $(`#developRating-${developId}`).val();
      const currentSweetness = $(`#developSweetness-${developId}`).val(); // 수정할 리뷰의 기존 별점
      const currentAcidity = $(`#developAcidity-${developId}`).val(); // 수정할 리뷰의 기존 별점
      const currentBody = $(`#developBody-${developId}`).val(); // 수정할 리뷰의 기존 별점
      const currentTannin = $(`#developTannin-${developId}`).val(); // 수정할 리뷰의 기존 별점
      const currentFizz = $(`#developFizz-${developId}`).val(); // 수정할 리뷰의 기존 별점
      const currentAromaOne = $(`#developAromaOne-${developId}`).val(); // 수정할 리뷰의 기존 별점
      const currentAromaTwo = $(`#developAromaTwo-${developId}`).val(); // 수정할 리뷰의 기존 별점
      const currentFoodOne = $(`#developFoodOne-${developId}`).val(); // 수정할 리뷰의 기존 별점
      const currentFoodTwo = $(`#developFoodTwo-${developId}`).val(); // 수정할 리뷰의 기존 별점
      console.log(currentAromaOne);
      console.log(currentAromaTwo);

      // 새로 만든 별점 인풋
      const ratingStars = `
                ${Array.from({ length: 5 }, (_, index) =>
              `<i class="fa fa-star ${index < currentRating ? 'active' : ''}" data-value="${index + 1}"></i>`
      ).join('')}
                 `;
      // 별점 밸류용 히든인풋
      const hiddenInput = `<input type="hidden" id="modify-developRating" name="developRating" value="${currentRating}">`;

      function createTanninSelect() {
        if (wineType === 'RED') {
          return `
                <div class="taste-category">
                    <h3>Tannin</h3>
                    <select class="select-option" name="modify-develop-tannin">
                        ${[0, 1, 2, 3, 4, 5].map(value =>
                  `<option value="${value}" ${value == currentTannin ? 'selected' : ''}>${value}</option>`).join('')}
                    </select>
                </div>
            `;
        }
        return '';
      }
      function createSweetnessSelect() {
        if (wineType !== 'SPARKLING') {
          return `
                <div class="taste-category">
                    <h3>Tannin</h3>
                    <select class="select-option" name="modify-develop-sweetness">
                        ${[0, 1, 2, 3, 4, 5].map(value =>
                  `<option value="${value}" ${value == currentSweetness ? 'selected' : ''}>${value}</option>`).join('')}
                    </select>
                </div>
            `;
        }
        return '';
      }
      function createFizzSelect() {
        if (wineType === 'SPARKLING') {
          return `
                <div class="taste-category">
                    <h3>Tannin</h3>
                    <select class="select-option" name="modify-develop-fizz">
                        ${[0, 1, 2, 3, 4, 5].map(value =>
                  `<option value="${value}" ${value == currentFizz ? 'selected' : ''}>${value}</option>`).join('')}
                    </select>
                </div>
            `;
        }
        return '';
      }

      // 별점포함 수정용 인풋
      const modifyInput = `
                <div class="pro-taste">
        <div class="taste-like">
            <div class="taste-category">
                <h3>Body</h3>
                <select class="select-option" name="modify-develop-body">
                    ${[0, 1, 2, 3, 4, 5].map(value =>
              `<option value="${value}" ${value == currentBody ? 'selected' : ''}>${value}</option>`).join('')}
                </select>
            </div>
            ${createTanninSelect()}
            ${createSweetnessSelect()}
            <div class="taste-category">
                <h3>Acidity</h3>
                <select class="select-option" name="modify-develop-acidity">
                    ${[0, 1, 2, 3, 4, 5].map(value =>
              `<option value="${value}" ${value == currentAcidity ? 'selected' : ''}>${value}</option>`).join('')}
                </select>
            </div>
            ${createFizzSelect()}

        </div>
    </div>

    <div class="pro-taste">
        <div class="taste-like">
            ${['Aroma-1', 'Aroma-2'].map((aroma, index) => `
                <div class="taste-category">
                    <h3>${aroma}</h3>
                    <select name="${index === 0 ? 'modify-develop-aromaOne' : 'modify-develop-aromaTwo'}">
                        ${[
        "Citrus", "Tree Fruit", "Stone Fruit", "Tropical Fruit",
        "Berry", "Floral", "Herb", "Vegetable",
        "Fermented", "Roasted", "Spice", "Nuts",
        "Tree", "Honey", "Fungi"
      ].map(option => `<option value="${option}" ${index === 0 ? (option === currentAromaOne ? 'selected' : '') : (option === currentAromaTwo ? 'selected' : '')}>${option}</option>`).join('')}
                    </select>
                </div>
            `).join('')}

            ${['Paring-1', 'Paring-2'].map((pairing, index) => `
                <div class="taste-category">
                    <h3>${pairing}</h3>
                    <select name="${index === 0 ? 'modify-develop-foodOne' : 'modify-develop-foodTwo'}">
                        ${[
        "Beef", "Chicken", "Pork", "Mushroom",
        "Charcuterie", "Cheese", "Pasta", "Spicy",
        "Snack", "Shell", "Fish", "Vegetable"
      ].map(option =>
              `<option value="${option}" ${index == 0 ? (option == currentFoodOne ? 'selected' : '') : (option == currentFoodTwo ? 'selected' : '')}>${option}</option>`
      ).join('')}
                    </select>
                </div>
            `).join('')}
        </div>
    </div>

                        <div class="my-rating modify-developRatingInput">${ratingStars}</div>
                        ${hiddenInput}
                        <textarea id="modify-comment-${developId}" required>${currentText}</textarea>
                        <div class="modify-actions">
                       <button onclick="saveModifyDevelop(${developId})">저장</button>
                        <button onclick="getWineDevelopList(${wineId}, ${page - 1})">취소</button></div>`;

      currentDiv.html(modifyInput); // 현재 리뷰를 수정 입력 필드로 변경
      const btns = document.querySelectorAll('#wineDevelopListContainer .comment-actions');
      for(let i = 0; i < btns.length; i++) {
        btns[i].remove();
      }


      // 수정에서
      $('.modify-developRatingInput i').on('click', function() {
        const rating = $(this).data('value');
        $('.modify-developRatingInput i').removeClass('active'); // 기존 별점 초기화
        $(this).prevAll().addBack().addClass('active'); // 선택한 별점과 이전 별점에 active 클래스 추가
        $('#modify-developRating').val(rating); // 숨겨진 input에 별점 저장
      });

      commentForm.className = "developForm display-none"; // 등록폼 안보이게하기





    }
    // 평가수정 날리기
    function saveModifyDevelop(developId) {
      const wineId = $('#getWineId').data('wine-id');
      const token = $("meta[name='_csrf']").attr("content");
      const header = $("meta[name='_csrf_header']").attr("content");
      const page = $("#developPageContainer .page-active a").text();
      const newComment = $(`#modify-comment-${developId}`).val();
      const newRating = $(`#modify-developRating`).val(); //
      const newSweetness = $('select[name="modify-develop-sweetness"]').val();
      const newAcidity = $('select[name="modify-develop-acidity"]').val();
      const newBody = $('select[name="modify-develop-body"]').val();
      const newTannin = $('select[name="modify-develop-tannin"]').val();
      const newFizz = $('select[name="modify-develop-fizz"]').val();
      const newAromaOne = $('select[name="modify-develop-aromaOne"]').val();
      const newAromaTwo = $('select[name="modify-develop-aromaTwo"]').val();
      const newFoodOne = $('select[name="modify-develop-foodOne"]').val();
      const newFoodTwo = $('select[name="modify-develop-foodTwo"]').val();
      if (newAromaOne === newAromaTwo) {
        alert('아로마는 같은 값을 선택할 수 없습니다.');
        return;
      }
      if (newFoodOne === newFoodTwo) {
        alert('페어링은 같은 값을 선택할 수 없습니다.');
        return;
      }

      const newDevelopData = {
        expertRating: newRating,
        expertComment: newComment,
        sweetness: newSweetness,
        acidity: newAcidity,
        body: newBody,
        tannin: newTannin,
        fizz: newFizz,
        aromaOne: newAromaOne,
        aromaTwo: newAromaTwo,
        foodOne: newFoodOne,
        foodTwo: newFoodTwo
      };

      $.ajax({
        url: `/develops/${developId}`, //
        type: 'PUT',
        contentType: 'application/json',
        data: JSON.stringify(newDevelopData), // 수정내용 전송
        beforeSend: function(xhr) {
          xhr.setRequestHeader(header, token);
        },
        success: function(response) {
          // 수정 성공 후 UI 업데이트
          getWineDevelopList(wineId, page-1);
        },
        error: function(xhr) {
          console.error(xhr);
          alert("평가 수정에 실패했습니다.");
        }
      });
    }
    // 리뷰페이지 불러오기
    function getWineReviewList(wineId, reviewPage) {
      const token = $("meta[name='_csrf']").attr("content");
      const header = $("meta[name='_csrf_header']").attr("content");
      const loginUserIdElement = $("#getLoginUserId");
      const noLoginUserIdElement = $("#getNoLoginUserId");
      const loginUserId = loginUserIdElement.length > 0
              ? loginUserIdElement.data("login-user-id")
              : noLoginUserIdElement.data("login-user-id");
      console.log(loginUserId);
      function createBtns(reviewMemberId, reviewId) {
        if (loginUserId === reviewMemberId) {
          return `
              <div class="comment-actions">
                  <button class="modify-btn" onclick="modifyReview(${reviewId})">수정</button>
                  <button class="delete-btn" onclick="deleteReview(${reviewId})">삭제</button>
              </div>
          `;
        }
        return '';
      }

      $.ajax({
        url: `/reviews/${wineId}/${reviewPage}`, // 템플릿 리터럴 사용
        type: 'GET',
        beforeSend: function(xhr) {
          xhr.setRequestHeader(header, token);
        },
        cache: false,
        success: function(data) {
          const wineReviewListContainer = $('#wineReviewListContainer');
          wineReviewListContainer.empty(); // 기존 내용 초기화

          data.wineReviews.forEach(function(review) {
            const reviewRating = review.regularRating != null ? Math.round(review.regularRating) : 0;

            const item = `
                <div class="review-content">
                    <div class="avatar">
                        <img src="/wineshare-img/people.png" alt="image" class="profile_img">
                    </div>
                    <div class="post-comment" id="post-review-${review.id}">
                        <div class="post-rating">
                            <span>
                                ${Array.from({ length: reviewRating }, () => `<i class="fa fa-star active" aria-hidden="true"></i>`).join('')}
                                ${Array.from({ length: 5 - reviewRating }, () => `<i class="fa fa-star" aria-hidden="true"></i>`).join('')}
                                <input type="hidden" id="reviewRating-${review.id}" name="reviewRating" value="${reviewRating}">
                            </span>
                        </div>
                        <div class="comment-title comment">${review.memberNickname}</div>
                        <div class="comment-text comment" id="comment-review-${review.id}">${review.regularReview}</div>
                        ${createBtns(review.memberId, review.id)}
                    </div>

                </div>

                `;
            wineReviewListContainer.append(item); // HTML 추가
            const commentForm = document.getElementById("comment-respond-review"); // 리뷰폼
            commentForm.className = "reviewForm"; // 등록 폼 다시 보이게

          });
          updateReviewPage(data.currentPage, data.totalPages)

        },
        error: function(xhr) {
          console.error(xhr);
          let errorMessage = '와인 리뷰 정보를 불러오지 못했습니다.';
          if (xhr.status === 401) {
            errorMessage = '로그인이 필요합니다.';
          } else if (xhr.status === 500) {
            errorMessage = '서버 오류가 발생했습니다. 나중에 다시 시도하세요.';
          }
          alert(errorMessage);
        }
      });
    }
    // 리뷰페이지네이션
    function updateReviewPage(currentPage, totalPages) {
      const wineId = $('#getWineId').data('wine-id');
      const paginationContainer = $('#reviewPageContainer');
      paginationContainer.empty(); // 기존 페이지네이션 비우기
      // 이전 버튼
      const prevDisabled = currentPage === 0 ? 'disabled' : '';
      paginationContainer.append(`
        <li class="prev hvr-shutter-out-horizontal ${prevDisabled}">
            <a ${prevDisabled ? '' : 'onclick="getWineReviewList(' + wineId + ',' + (currentPage - 1) + ')"'} aria-label="Previous">
                <i class="fa fa-angle-left" aria-hidden="true"></i>
            </a>
        </li>
        `);
      // maxPage를 정의합니다. (예: 5)
      const maxPage = 5;
      // 페이지 번호 계산
      let start = Math.floor(currentPage / maxPage) * maxPage; // 현재 페이지 기준으로 시작
      let end = Math.min(start + maxPage, totalPages); // 최대 maxPage 개수 표시
      // 페이지 번호 추가
      for (let i = start; i < end; i++) {
        const activeClass = i === currentPage ? 'page-active' : '';
        paginationContainer.append(`
            <li class="hvr-shutter-out-horizontal ${activeClass}">
                <a onclick="getWineReviewList(${wineId}, ${i} )" aria-label="Page">${i + 1}</a>
            </li>
        `);
      }
      // 다음 버튼
      const nextDisabled = (currentPage === totalPages -1 || totalPages === 0) ? 'disabled' : '';
      paginationContainer.append(`
        <li class="next hvr-shutter-out-horizontal ${nextDisabled}">
            <a ${nextDisabled ? '' : 'onclick="getWineReviewList('+ wineId + ',' + (currentPage + 1) + ')"'} aria-label="Next">
                <i class="fa fa-angle-right" aria-hidden="true"></i>
            </a>
        </li>
        `);
    }
    // 리뷰삭제
    function deleteReview(reviewId) {
      const wineId = $('#getWineId').data('wine-id');
      const token = $("meta[name='_csrf']").attr("content");
      const header = $("meta[name='_csrf_header']").attr("content");
      const page = $("#reviewPageContainer .page-active a").text();
      if (confirm("이 리뷰를 삭제하시겠습니까?")) {
        $.ajax({
          url: `/reviews/${reviewId}`,
          type: 'DELETE',
          beforeSend: function(xhr) {
            xhr.setRequestHeader(header, token);
          },
          success: function(response) {
            alert(response); // 성공 메시지
            // 리뷰 삭제 후 UI 업데이트
            getWineReviewList(wineId, page-1);
          },
          error: function(xhr) {
            if(xhr.status == '401'){
              alert("로그인 후 이용해주세요.");
              location.href = "/members/login";
            }else{
              alert(xhr.responseText);
            }
          }
        });
      }
    }
    // 리뷰수정폼 열기
    function modifyReview(reviewId) {
      const page = $("#reviewPageContainer .page-active a").text(); // 현재 리뷰페이지
      const wineId = $('#getWineId').data('wine-id'); // 현재페이지 와인아이디
      const commentForm = document.getElementById("comment-respond-review"); // 리뷰폼
      const commentDiv = $(`#comment-review-${reviewId}`); // 수정할 리뷰의 기존 텍스트에리어
      const currentDiv = $(`#post-review-${reviewId}`);
      const currentText = commentDiv.text(); // 수정할 리뷰의 기존 텍스트에리어의 내용
      const currentRating = $(`#reviewRating-${reviewId}`).val(); // 수정할 리뷰의 기존 별점 밸류
      console.log(currentRating);
      // 새로 만든 별점 인풋
      const ratingStars = `
                ${Array.from({ length: 5 }, (_, index) =>
              `<i class="fa fa-star ${index < currentRating ? 'active' : ''}" data-value="${index + 1}"></i>`
      ).join('')}
            `;
      const hiddenInput = `<input type="hidden" id="modify-reviewRating" name="reviewRating" value="${currentRating}">`;

      // 별점포함 수정용 인풋
      const modifyInput = `
                        <div class="my-rating modify-reviewRatingInput">${ratingStars}</div>
                        ${hiddenInput}
                        <textarea id="modify-comment-${reviewId}" required>${currentText}</textarea>
                        <div class="modify-actions">
                       <button onclick="saveModifyReview(${reviewId})">저장</button>
                        <button onclick="getWineReviewList(${wineId}, ${page - 1})">취소</button></div>`;

      currentDiv.html(modifyInput); // 현재 리뷰를 수정 입력 필드로 변경
      const btns = document.querySelectorAll('#wineReviewListContainer .comment-actions');
      for(let i = 0; i < btns.length; i++) {
        btns[i].remove();
      }

      // 수정에서
      $('.modify-reviewRatingInput i').on('click', function() {
        const rating = $(this).data('value');
        $('.modify-reviewRatingInput i').removeClass('active'); // 기존 별점 초기화
        $(this).prevAll().addBack().addClass('active'); // 선택한 별점과 이전 별점에 active 클래스 추가
        $('#modify-reviewRating').val(rating); // 숨겨진 input에 별점 저장
      });

      commentForm.className = "reviewForm display-none"; // 등록폼 안보이게하기


    }
    // 리뷰수정 날리기
    function saveModifyReview(reviewId) {
      const newComment = $(`#modify-comment-${reviewId}`).val();
      const newRating = $(`#modify-reviewRating`).val(); //
      const wineId = $('#getWineId').data('wine-id');
      const token = $("meta[name='_csrf']").attr("content");
      const header = $("meta[name='_csrf_header']").attr("content");
      const page = $("#reviewPageContainer .page-active a").text();

      $.ajax({
        url: `/reviews/${reviewId}`, //
        type: 'PUT',
        contentType: 'application/json',
        data: JSON.stringify({ regularReview: newComment,
          regularRating: newRating}), // 수정내용 전송
        beforeSend: function(xhr) {
          xhr.setRequestHeader(header, token);
        },
        success: function(response) {
          // 수정 성공 후 UI 업데이트
          getWineReviewList(wineId, page-1);
        },
        error: function(xhr) {
          console.error(xhr);
          alert("리뷰 수정에 실패했습니다.");
        }
      });
    }
    // 와인 삭제 메소드
    function deleteWine(wineId) {
      const token = $("meta[name='_csrf']").attr("content");
      const header = $("meta[name='_csrf_header']").attr("content");
      if (confirm("이 와인을 삭제하시겠습니까?")) {
        $.ajax({
          url: `/wines/${wineId}`,
          type: 'DELETE',
          beforeSend: function(xhr) {
            xhr.setRequestHeader(header, token);
          },
          success: function(response) {
            alert(response); // 성공 메시지
            location.href = "/wines/list";
          },
          error: function(xhr) {
            if(xhr.status == '401'){
              alert("로그인 후 이용해주세요.");
              location.href = "/members/login";
            }else{
              alert(xhr.responseText);
            }
          }
        });
      }
    }
  </script>
</th:block>


<div layout:fragment="content">
  <!-- 로그인 사용자 확인용 -->
  <span th:if="${loginUser != null}">
    <span id="getLoginUserId" th:data-login-user-id="${loginUser.id}"> </span>
    <span id="getMemberType" th:data-member-type="${loginUser.memberType}"></span>
  </span>
  <span th:unless="${loginUser != null}">
    <span id="getNoLoginUserId" data-login-user-id="0"></span>
    <span id="getNoMemberType" th:data-member-type="0"></span>
  </span>

  <!-- 와인 타입용 -->
  <div class="page-title parallax parallax1">
    <div class="container">
      <div class="page-title-content d-sm-flex justify-content-sm-between align-items-center text-center">
        <div class="breadcrumbs">
          <ul>
            <li><a>Home</a></li>
            <li><a>Wines</a></li>
            <li class="blog"><a>Wine Details</a></li>
          </ul>
        </div>
        <div class="page-title-heading">
          <h2 class="title"><a>WINE DETAILS</a></h2>
        </div>
      </div>
    </div>
  </div> <!-- /.page-title -->
  <div id="loading-overlay">
    <div class="loader"></div>
  </div> <!-- /.loading-overlay -->

  <div class="main-shop-detail-review" >
    <section class="main-shop-detail" style="padding: 100px 0 50px 0;">
      <div class="container">
        <div class="row">
          <div class="col-lg-6 col-md-6">
            <div class="image-wrap">

              <img th:src="${wine.wineImg == 'https://images.vivino.com/highlights/icon/most_user_rated.svg' ||
              wine.wineImg == 'https://thumbs.vivino.com/avatars/ZlapMkM9QayY3ci79lSL7A_50x50.jpg' ||
              wine.wineImg == 'https://images.vivino.com/highlights/icon/top_ranked.svg'
              ? '/image/wineDefault.png' : wine.wineImg}" alt="image"
                   th:class="wine_img"
                   onerror="this.onerror=null; this.src='/image/wineDefault.png'; this.className='wine_img'">

            </div>
          </div>
          <div class="col-lg-6 col-md-6">
            <div class="content-wrap">
              <h1 class="heading" th:text="${wine.wineName}"></h1>

              <h3 class="dolar" th:text="${wine.price == null || wine.price == 0 ? '가격정보없음' : #numbers.formatCurrency(wine.price)}">$19.99</h3>

              <div class="info-content">
                <ul>
                  <li>
                    <span class="note">
                      <span th:with="end=${wineDevelopCount.expertRating != null || wineDevelopCount.expertRating != 0 ? T(java.lang.Math).round(wineDevelopCount.expertRating) : 0}">
                        <span th:each="i : ${#numbers.sequence(1, end)}" th:if="${end > 0}">
                          <i class="fa fa-star active" aria-hidden="true"></i> <!-- 채워진 별 -->
                        </span>
                        <span th:each="i : ${#numbers.sequence(end + 1, 5)}" th:if="${end < 5}">
                          <i class="fa fa-star" aria-hidden="true"></i> <!-- 빈 별 -->
                        </span>
                        <span th:text="${#numbers.formatDecimal(wineDevelopCount.ExpertRating, 1, 1)}"></span>
                      </span>
                      (전문가)
                    </span>
                  </li>
                  <li>
                    <span class="note">
                      <span th:with="end=${wineReviewRating.regularRating != null || wineReviewRating.regularRating != 0 ? T(java.lang.Math).round(wineReviewRating.regularRating) : 0}">
                        <span th:each="i : ${#numbers.sequence(1, end)}" th:if="${end > 0}">
                          <i class="fa fa-star active" aria-hidden="true"></i> <!-- 채워진 별 -->
                        </span>
                        <span th:each="i : ${#numbers.sequence(end + 1, 5)}" th:if="${end < 5}">
                          <i class="fa fa-star" aria-hidden="true"></i> <!-- 빈 별 -->
                        </span>
                        <span th:text="${#numbers.formatDecimal(wineReviewRating.regularRating, 1, 1)}"></span>
                      </span>
                      (소비자)
                    </span>
                  </li>

                  <li>
                    <br>
                    <span class="note">
                      Type:
                      <span th:text="${wine.wineType}" id="getWineType" th:data-wine-type="${wine.wineType}"></span>
                    </span>
                  </li>
                  <li>
                    <span class="note">
                      Country:
                      <span th:text="${wine.country}"></span>
                    </span>
                  </li>
                  <li>
                    <span class="note">
                      Region:
                      <span th:text="${wine.region}"></span>
                    </span>
                  </li>
                </ul>
              </div>

              <div class="content-cart clearfix">
                <br>
                <div class="cart clearfix">
                  <div class="heart mg-item-ct" onclick="addCellar(this)" th:data-wine-id="${wine.id}" id="getWineId"
                       th:classappend="${isInCellar} ? 'active' : ''">
                    <i class="fa fa-heart" aria-hidden="true" th:classappend="${isInCellar} ? 'active' : ''"></i>
                  </div>
                  <div class="wine-modify-delete-btn-box comment-actions">
                    <button class="modify-btn" id="modify-btn" th:onclick="'location.href=\'/wines/wine/get/' + ${wine.id} + '\''">수정</button>
                    <button class="delete-btn" id="delete-btn" th:onclick="'javascript:deleteWine('+ ${wine.id} +')'">삭제</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div> <!-- /row-->
      </div> <!-- /container -->
    </section> <!-- /main-shop-detail -->

    <!--  맛 그래프  -->
    <div class="taste-Graph">
      <h3>Wine Taste Like</h3>
      <table class="tasteStructure">
        <tbody>
        <tr>
          <td>
            <div class="tasteStructureNm">Light</div>
          </td>
          <td>
            <div class="progress" role="progressbar" aria-label="Basic example" th:aria-valuenow="${wineDevelopCount.body}" aria-valuemin="0" aria-valuemax="5">
              <div class="progress-bar" th:style="'left: ' + (${(wineDevelopCount.body / 5 * 100) >= 100 ? 100 : (wineDevelopCount.body / 5 * 100) } + '%') + ';'"></div>
            </div>
          </td>
          <td>
            <div class="tasteStructureNm">Bold</div>
          </td>
        </tr>

        <tr id="tanninGraph">
          <td>
            <div class="tasteStructureNm">Smooth</div>
          </td>
          <td>
            <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
              <div class="progress-bar" th:style="'left: ' + (${(wineDevelopCount.tannin / 5 * 100) >= 100 ? 100 : (wineDevelopCount.tannin / 5 * 100) } + '%') + ';'"></div>
            </div>
          </td>
          <td>
            <div class="tasteStructureNm">Tannic</div>
          </td>
        </tr>
        <tr id="sweetnessGraph">

          <td>
            <div class="tasteStructureNm">Dry</div>
          </td>
          <td>
            <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
              <div class="progress-bar" th:style="'left: ' + (${(wineDevelopCount.sweetness / 5 * 100) >= 100 ? 100 : (wineDevelopCount.sweetness / 5 * 100) } + '%') + ';'"></div>
            </div>
          </td>
          <td>
            <div class="tasteStructureNm">Sweet</div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="tasteStructureNm">Soft</div>
          </td>
          <td>
            <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
              <div class="progress-bar" th:style="'left: ' + (${(wineDevelopCount.acidity / 5 * 100) >= 100 ? 100 : (wineDevelopCount.acidity / 5 * 100) } + '%') + ';'"></div>
            </div>
          </td>
          <td>
            <div class="tasteStructureNm">Acidic</div>
          </td>
        </tr>
        <tr id="fizzGraph">
          <td>
            <div class="tasteStructureNm">Gentle</div>
          </td>
          <td>
            <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
              <div class="progress-bar" th:style="'left: ' + (${(wineDevelopCount.fizz / 5 * 100) >= 100 ? 100 : (wineDevelopCount.fizz / 5 * 100) } + '%') + ';'"></div>
            </div>
          </td>
          <td>
            <div class="tasteStructureNm">Fizzy</div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>

    <!-- 사용자 아로마 휠, 페어링 뷰 -->
    <div class="card-container">
      <div class="aroma-container">
        <h2>Aroma Wheel</h2>
        <div class="card">
          <img class="aroma" th:src="${aromaOne.aromaImg}" alt="aroma">
          <p th:text="${aromaOne.aromaValue}">이곳은 카드 1의 내용입니다.</p>
        </div>
        <div class="card">
          <img class="aroma" th:src="${aromaTwo.aromaImg}" alt="aroma">
          <p th:text="${aromaTwo.aromaValue}">이곳은 카드 2의 내용입니다.</p>
        </div>
      </div>

      <div class="food-container">
        <h2>Food Pairing</h2>
        <div class="food">
          <img class="pairing" th:src="${foodOne.foodImg}" alt="pairing">
          <p th:text="${foodOne.food}">이곳은 카드 1의 내용입니다.</p>
        </div>
        <div class="food">
          <img class="pairing" th:src="${foodTwo.foodImg}" alt="pairing">
          <p th:text="${foodTwo.food}">이곳은 카드 2의 내용입니다.</p>
        </div>
      </div>
    </div>







    <!-- 비슷한 와인 리스트 -->
    <section class="flat-products style2" style="padding: 100px 0 50px 0;">
      <div class="container">
        <div class="row">
          <div class="col-lg-10" style="margin: 0 auto;">
            <div class="title-section">
              <h1 class="our-product-main">Similar Wine</h1>
              <div class="our-product-image">
                <img th:src="@{/image/homepage14.png}" alt="image">
              </div>
            </div> <!-- /title-section -->
            <div class="product-content product-fourcolumn clearfix">
              <ul class="product style2 isotope-product clearfix">
                <li class="product-item features arrivals" th:each="similarWine, status : ${similarWineList}">
                  <div class="product-thumb clearfix" >
                    <a th:href="@{'/wines/wine/' + ${similarWine.id}}" class="product-thumb">
                      <img th:src="${similarWine.wineImg == 'https://images.vivino.com/highlights/icon/most_user_rated.svg' ||
                                                    similarWine.wineImg == 'https://thumbs.vivino.com/avatars/ZlapMkM9QayY3ci79lSL7A_50x50.jpg' ||
                                                    similarWine.wineImg == 'https://images.vivino.com/highlights/icon/top_ranked.svg'
                                                    ? '/image/wineDefault.png' : similarWine.wineImg}" alt="image"
                           th:class="similar_img"
                           onerror="this.onerror=null; this.src='/image/wineDefault.png';">
                    </a>
                  </div>
                  <div class="product-info text-center clearfix">
                    <span class="product-title" th:text="${similarWine.wineName}">와인이름</span>
                  </div>
                  <div class="product-review">
                    <div class="add-cart heart">
                      <span class="similar-wine-inner-text" th:if="${status.index == 0}"># 같은 종류의 와인</span>
                      <span class="similar-wine-inner-text" th:if="${status.index == 1}"># 아로마가 비슷한 와인</span>
                      <span class="similar-wine-inner-text" th:if="${status.index == 2}"># 어울리는 음식이 비슷한 와인</span>
                      <span class="similar-wine-inner-text" th:if="${status.index == 3}"># 같은 생산국의 와인</span>
                    </div>
                  </div>
                </li> <!-- /product-item -->

              </ul>
            </div>
          </div> <!-- /col-lg-12 -->
        </div> <!-- /row -->
      </div> <!-- /container -->
    </section> <!-- /flat-products-->

    <!--   리뷰 공간     -->
    <section class="main-shop-detail" style="padding: 0 0 50px 0;">
      <div class="container">
        <div class="row">
          <div class="col-lg-11" >
            <div class="woocommerce-tabs wc-tabs-wrapper">
              <ul class="tabs">
                <li><a class="tab active" data-id ='#tab-description' href="#">Expert Review</a></li>
                <li><a class="tab" data-id ='#tab-reviews' href="#">User Review</a></li>
              </ul>
              <!--    전문가 리뷰      -->
              <div id="tab-description" class="tab-content">
                <div class="post-bottom-second post-bottom" >
                  <div class="review_box" id="wineDevelopListContainer">
                    <!-- 전문가 평가 들어올 자리 -->
                  </div>
                </div> <!-- /post-bottom-second -->

                <!-- 페이지 네이션 -->
                <div class="blog-pagination text-center">
                  <ul class="flat-pagination" id="developPageContainer">

                  </ul>
                </div>

                <div class="comment-respond">
                  <form class="developForm" id="comment-respond-develop">
                    <!-- 전문가 맛 그래프 입력 폼 -->
                    <p>Add Review</p>
                    <div class="pro-taste">
                      <div class="taste-like">
                        <div class="taste-category">
                          <h3>Body</h3>
                          <select class="select-option" name="develop-body">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                          </select>

                        </div>

                        <div class="taste-category" id="tanninSelector">
                          <h3>Tannin</h3>
                          <select class="select-option" name="develop-tannin">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                          </select>
                        </div>

                        <div class="taste-category" id="sweetnessSelector">
                          <h3>Sweetness</h3>
                          <select class="select-option" name="develop-sweetness">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                          </select>
                        </div>

                        <div class="taste-category">
                          <h3>Acidity</h3>
                          <select class="select-option" name="develop-acidity">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                          </select>
                        </div>

                        <div class="taste-category" id="fizzSelector">
                          <h3>Fizz</h3>
                          <select class="select-option" name="develop-fizz">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                          </select>
                        </div>
                      </div>

                    </div>



                    <!-- 전문가 아로마 휠, 페어링 입력 폼 -->

                    <div class="pro-taste">
                      <div class="taste-like">

                      <!--   아로마 휠 & 푸드 페어링       -->
                        <div class="taste-category">
                        <h3>Aroma-1</h3>
                        <select name="develop-aromaOne" id="aromaOne">
                          <option value="Citrus">Citrus</option>
                          <option value="Tree Fruit">Tree Fruit</option>
                          <option value="Stone Fruit">Stone Fruit</option>
                          <option value="Tropical Fruit">Tropical Fruit</option>
                          <option value="Berry">Berry</option>
                          <option value="Floral">Floral</option>
                          <option value="Herb">Herb</option>
                          <option value="Vegetable">Vegetable</option>
                          <option value="Fermented">Fermented</option>
                          <option value="Roasted">Roasted</option>
                          <option value="Spice">Spice</option>
                          <option value="Nuts">Nuts</option>
                          <option value="Tree">Tree</option>
                          <option value="Honey">Honey</option>
                          <option value="Fungi">Fungi</option>
                        </select>
                      </div>

                        <div class="taste-category">
                        <h3>Aroma-2</h3>
                        <select name="develop-aromaTwo" id="aromaTwo">
                          <option value="Citrus">Citrus</option>
                          <option value="Tree Fruit">Tree Fruit</option>
                          <option value="Stone Fruit">Stone Fruit</option>
                          <option value="Tropical Fruit">Tropical Fruit</option>
                          <option value="Berry">Berry</option>
                          <option value="Floral">Floral</option>
                          <option value="Herb">Herb</option>
                          <option value="Vegetable">Vegetable</option>
                          <option value="Fermented">Fermented</option>
                          <option value="Roasted">Roasted</option>
                          <option value="Spice">Spice</option>
                          <option value="Nuts">Nuts</option>
                          <option value="Tree">Tree</option>
                          <option value="Honey">Honey</option>
                          <option value="Fungi">Fungi</option>
                        </select>
                      </div>

                        <div class="taste-category">
                        <h3>Paring-1</h3>
                        <select name="develop-foodOne" id="foodOne">
                          <option value="Beef">Beef</option>
                          <option value="Chicken">Chicken</option>
                          <option value="Pork">Pork</option>
                          <option value="Mushroom">Mushroom</option>
                          <option value="Charcuterie">Charcuterie</option>
                          <option value="Cheese">Cheese</option>
                          <option value="Pasta">Pasta</option>
                          <option value="Spicy">Spicy</option>
                          <option value="Snack">Snack</option>
                          <option value="Shell">Shell</option>
                          <option value="Fish">Fish</option>
                          <option value="Vegetable">Vegetable</option>
                        </select>
                      </div>

                        <div class="taste-category">
                        <h3>Paring-2</h3>
                        <select name="develop-foodTwo" id="foodTwo">
                          <option value="Beef">Beef</option>
                          <option value="Chicken">Chicken</option>
                          <option value="Pork">Pork</option>
                          <option value="Mushroom">Mushroom</option>
                          <option value="Charcuterie">Charcuterie</option>
                          <option value="Cheese">Cheese</option>
                          <option value="Pasta">Pasta</option>
                          <option value="Spicy">Spicy</option>
                          <option value="Snack">Snack</option>
                          <option value="Shell">Shell</option>
                          <option value="Fish">Fish</option>
                          <option value="Vegetable">Vegetable</option>
                        </select>
                      </div>
                      </div>
                    </div>


                    <div class="clearfix"></div>
                    <p class="your-rating">Rating</p>
                    <div class="developRatingInput">
                      <i class="fa fa-star" aria-hidden="true" data-value="1"></i>
                      <i class="fa fa-star" aria-hidden="true" data-value="2"></i>
                      <i class="fa fa-star" aria-hidden="true" data-value="3"></i>
                      <i class="fa fa-star" aria-hidden="true" data-value="4"></i>
                      <i class="fa fa-star" aria-hidden="true" data-value="5"></i>
                      <input type="hidden" id="developRating" name="developRating" value=""> <!-- 숨겨진 입력 필드로 별점 저장 -->
                    </div>
                    <p class="comment-form-comment">
                      <textarea  name="developComment" placeholder="Comment" required="required"></textarea>
                    </p>
                    <p class="submit-form">
                      <button name="submit" type="submit" class="submit btn btn-styl hvr-shutter-out-horizontal" >SUBMIT</button>
                    </p>
                  </form>
                </div>  <!-- /comment-respond -->
              </div>
              <!--    일반유저 리뷰      -->
              <div id="tab-reviews" class="tab-content">
                  <div class="post-bottom-second post-bottom" >
                    <div class="review_box" id="wineReviewListContainer">
                      <!-- 일반유저 평가 들어올 자리 -->
                    </div>
                  </div> <!-- /post-bottom-second -->

                  <!-- 페이지 네이션 -->
                  <div class="blog-pagination text-center">
                    <ul class="flat-pagination" id="reviewPageContainer">

                    </ul>
                  </div>

                  <div class="comment-respond">
                    <form class="reviewForm" id="comment-respond-review">
                      <p>Add Review</p>
                      <div class="clearfix"></div>
                      <p class="your-rating">Rating</p>
                      <div class="reviewRatingInput">
                        <i class="fa fa-star" aria-hidden="true" data-value="1"></i>
                        <i class="fa fa-star" aria-hidden="true" data-value="2"></i>
                        <i class="fa fa-star" aria-hidden="true" data-value="3"></i>
                        <i class="fa fa-star" aria-hidden="true" data-value="4"></i>
                        <i class="fa fa-star" aria-hidden="true" data-value="5"></i>
                        <input type="hidden" id="reviewRating" name="reviewRating" value=""> <!-- 숨겨진 입력 필드로 별점 저장 -->
                      </div>
                      <p class="comment-form-comment">
                        <!-- <label>Comment</label>  -->
                        <textarea  name="reviewComment" placeholder="Comment" required="required"></textarea>
                      </p>
                      <p class="submit-form">
                        <button name="submit" type="submit"  class="submit btn btn-styl hvr-shutter-out-horizontal" >SUBMIT</button>
                      </p>
                    </form>
                  </div>  <!-- /comment-respond -->

                </div>
              </div>
            </div>
          </div>
        </div>
    </section>
  </div>


</div>
</html>